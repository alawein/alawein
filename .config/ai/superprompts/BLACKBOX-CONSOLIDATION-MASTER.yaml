name: BLACKBOX-CONSOLIDATION-MASTER
version: "1.0"
description: Master orchestration prompt for comprehensive repository consolidation
target_audience: Blackbox AI System
scope: Full monorepo simplification and elegance

core_mission: |
  Transform the Alawein Technologies monorepo into an elegant, maintainable system
  by consolidating redundant structures, eliminating duplication, and establishing
  clear governance patterns while preserving all functionality.

phases:
  - phase: DISCOVERY
    prompts:
      - REPOSITORY-STRUCTURE-AUDIT
      - DUPLICATION-DETECTION
      - DEPENDENCY-MAPPING
      - GOVERNANCE-INVENTORY
      - POLICY-CONSOLIDATION
  
  - phase: ANALYSIS
    prompts:
      - REDUNDANCY-ANALYSIS
      - COMPLEXITY-SCORING
      - REFACTORING-IMPACT-ASSESSMENT
      - CONSOLIDATION-OPPORTUNITIES
      - RISK-EVALUATION
  
  - phase: DESIGN
    prompts:
      - UNIFIED-ARCHITECTURE-DESIGN
      - GOVERNANCE-FRAMEWORK-DESIGN
      - POLICY-UNIFICATION-DESIGN
      - WORKFLOW-STANDARDIZATION-DESIGN
      - TOOLING-CONSOLIDATION-DESIGN
  
  - phase: IMPLEMENTATION
    prompts:
      - INCREMENTAL-REFACTORING-PLAN
      - MIGRATION-STRATEGY
      - TESTING-STRATEGY
      - ROLLBACK-PROCEDURES
      - VALIDATION-CHECKPOINTS

critical_systems:
  - name: Workflow System
    current_state: 29+ GitHub Actions workflows, multiple orchestration tools
    target_state: Unified workflow engine with clear patterns
    prompts:
      - WORKFLOW-CONSOLIDATION
      - GITHUB-ACTIONS-UNIFICATION
      - ORCHESTRATION-SIMPLIFICATION
  
  - name: Prompt System
    current_state: 100+ prompts across multiple directories
    target_state: Centralized, categorized prompt library
    prompts:
      - PROMPT-LIBRARY-CONSOLIDATION
      - PROMPT-CATEGORIZATION
      - PROMPT-VERSIONING-SYSTEM
  
  - name: Configuration System
    current_state: Multiple config formats and locations
    target_state: Single source of truth with clear inheritance
    prompts:
      - CONFIG-UNIFICATION
      - ENVIRONMENT-STANDARDIZATION
      - SECRETS-MANAGEMENT-CONSOLIDATION
  
  - name: Governance System
    current_state: Scattered policies and rules
    target_state: Unified governance framework
    prompts:
      - GOVERNANCE-CONSOLIDATION
      - POLICY-STANDARDIZATION
      - COMPLIANCE-FRAMEWORK-UNIFICATION
  
  - name: CI/CD Pipeline
    current_state: Multiple pipeline definitions
    target_state: Single composable pipeline system
    prompts:
      - CICD-PIPELINE-UNIFICATION
      - REUSABLE-WORKFLOW-CONSOLIDATION
      - BUILD-SYSTEM-STANDARDIZATION
  
  - name: Documentation System
    current_state: Scattered docs across projects
    target_state: Centralized, searchable documentation
    prompts:
      - DOCUMENTATION-CONSOLIDATION
      - ARCHITECTURE-DOCUMENTATION-UNIFICATION
      - API-DOCUMENTATION-STANDARDIZATION
  
  - name: Testing Framework
    current_state: Multiple test runners and patterns
    target_state: Unified testing strategy
    prompts:
      - TESTING-FRAMEWORK-CONSOLIDATION
      - TEST-PATTERN-STANDARDIZATION
      - COVERAGE-STRATEGY-UNIFICATION
  
  - name: Tooling Ecosystem
    current_state: Scattered tools and scripts
    target_state: Integrated tool platform
    prompts:
      - TOOLING-CONSOLIDATION
      - CLI-UNIFICATION
      - SCRIPT-STANDARDIZATION

consolidation_principles:
  - principle: DRY (Don't Repeat Yourself)
    description: Eliminate duplicate code, configs, and workflows
    metrics:
      - Duplication ratio
      - File count reduction
      - Configuration centralization
  
  - principle: Single Source of Truth
    description: One authoritative location for each concern
    metrics:
      - Config file count
      - Policy document count
      - Workflow definition count
  
  - principle: Clear Separation of Concerns
    description: Each system has one responsibility
    metrics:
      - Module coupling
      - Dependency clarity
      - System boundaries
  
  - principle: Composability
    description: Build complex systems from simple, reusable parts
    metrics:
      - Reusable component count
      - Composition depth
      - Integration points
  
  - principle: Discoverability
    description: Easy to find and understand systems
    metrics:
      - Documentation completeness
      - Navigation clarity
      - Search effectiveness

refactoring_targets:
  - target: Workflow Consolidation
    current_files: 29+ GitHub Actions workflows
    consolidation_strategy: |
      - Extract common patterns into reusable workflows
      - Create workflow templates for each project type
      - Establish workflow composition system
      - Centralize workflow configuration
    expected_reduction: 70% fewer workflow files
    risk_level: MEDIUM
  
  - target: Prompt System Consolidation
    current_files: 100+ prompts across 5+ directories
    consolidation_strategy: |
      - Create unified prompt library structure
      - Implement prompt versioning system
      - Establish prompt inheritance patterns
      - Create prompt composition framework
    expected_reduction: 60% fewer prompt files
    risk_level: LOW
  
  - target: Configuration Consolidation
    current_files: Multiple config formats (YAML, JSON, env)
    consolidation_strategy: |
      - Standardize on single config format
      - Create configuration inheritance system
      - Implement environment-specific overrides
      - Centralize secrets management
    expected_reduction: 80% fewer config files
    risk_level: MEDIUM
  
  - target: Governance Consolidation
    current_files: Scattered policies and rules
    consolidation_strategy: |
      - Create unified governance framework
      - Establish policy hierarchy
      - Implement policy versioning
      - Create policy composition system
    expected_reduction: 75% fewer policy files
    risk_level: LOW
  
  - target: CI/CD Pipeline Consolidation
    current_files: Multiple pipeline definitions
    consolidation_strategy: |
      - Create unified pipeline engine
      - Extract reusable pipeline stages
      - Implement pipeline composition
      - Standardize pipeline configuration
    expected_reduction: 65% fewer pipeline files
    risk_level: MEDIUM
  
  - target: Documentation Consolidation
    current_files: Scattered across projects
    consolidation_strategy: |
      - Create centralized documentation hub
      - Implement documentation inheritance
      - Establish documentation standards
      - Create documentation search system
    expected_reduction: 50% fewer doc files
    risk_level: LOW
  
  - target: Testing Framework Consolidation
    current_files: Multiple test runners and patterns
    consolidation_strategy: |
      - Create unified test runner
      - Standardize test patterns
      - Implement test composition
      - Centralize test configuration
    expected_reduction: 70% fewer test config files
    risk_level: MEDIUM
  
  - target: Tooling Consolidation
    current_files: Scattered tools and scripts
    consolidation_strategy: |
      - Create unified tool platform
      - Implement tool composition
      - Standardize tool interfaces
      - Centralize tool configuration
    expected_reduction: 60% fewer tool files
    risk_level: MEDIUM

success_metrics:
  - metric: File Count Reduction
    target: 40% reduction in total files
    measurement: Count before/after consolidation
  
  - metric: Configuration Centralization
    target: 80% of configs in single location
    measurement: Config file distribution
  
  - metric: Duplication Elimination
    target: <5% code duplication
    measurement: Duplication analysis tools
  
  - metric: Documentation Completeness
    target: 100% of systems documented
    measurement: Documentation coverage
  
  - metric: Test Coverage
    target: >80% code coverage
    measurement: Coverage reports
  
  - metric: Build Time
    target: <50% of current build time
    measurement: CI/CD metrics
  
  - metric: Developer Onboarding Time
    target: <2 hours to productive
    measurement: Developer feedback
  
  - metric: System Maintainability
    target: >8/10 maintainability score
    measurement: Code quality tools

risk_mitigation:
  - risk: Breaking existing workflows
    mitigation: |
      - Maintain backward compatibility during transition
      - Create compatibility layer for old patterns
      - Gradual migration with feature flags
      - Comprehensive testing at each step
  
  - risk: Data loss during consolidation
    mitigation: |
      - Full backup before any changes
      - Version control for all changes
      - Rollback procedures for each phase
      - Validation checkpoints
  
  - risk: Developer disruption
    mitigation: |
      - Clear communication plan
      - Training and documentation
      - Gradual rollout to teams
      - Support channels during transition
  
  - risk: Performance degradation
    mitigation: |
      - Performance benchmarking before/after
      - Optimization during consolidation
      - Monitoring and alerting
      - Rollback if performance drops >10%

deliverables:
  - Unified Architecture Documentation
  - Consolidated Workflow System
  - Centralized Prompt Library
  - Unified Configuration System
  - Consolidated Governance Framework
  - Unified CI/CD Pipeline
  - Centralized Documentation Hub
  - Unified Testing Framework
  - Consolidated Tooling Platform
  - Migration Guide
  - Rollback Procedures
  - Developer Onboarding Guide
  - Maintenance Procedures
  - Monitoring and Alerting Setup

timeline:
  phase_1_discovery: 1 week
  phase_2_analysis: 1 week
  phase_3_design: 2 weeks
  phase_4_implementation: 4 weeks
  phase_5_validation: 1 week
  total: 9 weeks

success_criteria:
  - All functionality preserved
  - 40%+ file reduction
  - 80%+ configuration centralization
  - <5% code duplication
  - 100% test coverage maintained
  - Build time reduced by 50%
  - Developer satisfaction >8/10
  - Zero data loss
  - Smooth rollout with no major incidents