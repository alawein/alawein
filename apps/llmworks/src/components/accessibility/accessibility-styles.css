/* Accessibility Enhancement Styles */
/* These styles are applied dynamically based on user preferences */

/* High Contrast Mode */
.a11y-high-contrast {
  --background: 0 0% 0%;
  --foreground: 0 0% 100%;
  --card: 0 0% 0%;
  --card-foreground: 0 0% 100%;
  --popover: 0 0% 0%;
  --popover-foreground: 0 0% 100%;
  --primary: 0 0% 100%;
  --primary-foreground: 0 0% 0%;
  --secondary: 0 0% 20%;
  --secondary-foreground: 0 0% 100%;
  --muted: 0 0% 20%;
  --muted-foreground: 0 0% 100%;
  --accent: 0 0% 100%;
  --accent-foreground: 0 0% 0%;
  --destructive: 0 100% 50%;
  --destructive-foreground: 0 0% 100%;
  --border: 0 0% 100%;
  --input: 0 0% 20%;
  --ring: 0 0% 100%;
}

.a11y-high-contrast * {
  border-color: hsl(var(--border)) !important;
  box-shadow: none !important;
  text-shadow: none !important;
}

.a11y-high-contrast img {
  filter: contrast(1.2) brightness(1.1);
}

.a11y-high-contrast button,
.a11y-high-contrast [role="button"] {
  border: 2px solid hsl(var(--border)) !important;
  background: hsl(var(--background)) !important;
  color: hsl(var(--foreground)) !important;
}

.a11y-high-contrast button:hover,
.a11y-high-contrast [role="button"]:hover {
  background: hsl(var(--foreground)) !important;
  color: hsl(var(--background)) !important;
}

/* Large Text Scaling */
.a11y-large-text {
  font-size: calc(1rem * var(--a11y-text-scale, 1.2));
}

.a11y-large-text * {
  font-size: calc(1em * var(--a11y-text-scale, 1.2));
  line-height: calc(1.5 * var(--a11y-text-scale, 1.2));
}

.a11y-large-text h1 { font-size: calc(2.25rem * var(--a11y-text-scale, 1.2)); }
.a11y-large-text h2 { font-size: calc(1.875rem * var(--a11y-text-scale, 1.2)); }
.a11y-large-text h3 { font-size: calc(1.5rem * var(--a11y-text-scale, 1.2)); }
.a11y-large-text h4 { font-size: calc(1.25rem * var(--a11y-text-scale, 1.2)); }
.a11y-large-text h5 { font-size: calc(1.125rem * var(--a11y-text-scale, 1.2)); }
.a11y-large-text h6 { font-size: calc(1rem * var(--a11y-text-scale, 1.2)); }

/* Reduced Motion */
.a11y-reduced-motion *,
.a11y-reduced-motion *::before,
.a11y-reduced-motion *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
  scroll-behavior: auto !important;
}

.a11y-reduced-motion .animate-spin {
  animation: none !important;
}

.a11y-reduced-motion [data-state="open"] {
  animation: none !important;
}

/* Screen Reader Optimizations */
.a11y-screen-reader {
  --transition-duration: 0ms;
}

.a11y-screen-reader * {
  transition: none !important;
  animation: none !important;
}

.a11y-screen-reader .sr-only {
  position: static !important;
  width: auto !important;
  height: auto !important;
  padding: 0.25rem !important;
  margin: 0.25rem 0 !important;
  overflow: visible !important;
  clip: auto !important;
  white-space: normal !important;
  background: hsl(var(--secondary)) !important;
  color: hsl(var(--secondary-foreground)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: 0.25rem !important;
  font-size: 0.875rem !important;
}

/* Enhanced Focus Indicators */
.a11y-enhanced-focus *:focus-visible {
  outline: 4px solid hsl(var(--primary)) !important;
  outline-offset: 4px !important;
  box-shadow: 0 0 0 8px hsl(var(--primary) / 0.2) !important;
  border-radius: 0.375rem !important;
  z-index: 1000 !important;
  position: relative !important;
}

.a11y-enhanced-focus button:focus-visible,
.a11y-enhanced-focus [role="button"]:focus-visible {
  outline: 4px solid hsl(var(--primary)) !important;
  outline-offset: 4px !important;
  box-shadow: 0 0 0 8px hsl(var(--primary) / 0.2) !important;
}

.a11y-enhanced-focus input:focus-visible,
.a11y-enhanced-focus textarea:focus-visible,
.a11y-enhanced-focus select:focus-visible {
  outline: 4px solid hsl(var(--primary)) !important;
  outline-offset: 2px !important;
  border-color: hsl(var(--primary)) !important;
}

.a11y-enhanced-focus a:focus-visible {
  outline: 4px solid hsl(var(--primary)) !important;
  outline-offset: 2px !important;
  background: hsl(var(--primary) / 0.1) !important;
  border-radius: 0.25rem !important;
}

/* Cursor Size Options */
.a11y-cursor-large * {
  cursor: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTAgMEwyMCAyMEwxNC42IDE0LjZMMTAuNCAyOEw2IDE2TDAgMFoiIGZpbGw9ImJsYWNrIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjEiLz4KPC9zdmc+') 0 0, auto !important;
}

.a11y-cursor-extra-large * {
  cursor: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTAgMEwzMCAzMEwyMS45IDIxLjlMMTUuNiA0Mkw5IDI0TDAgMFoiIGZpbGw9ImJsYWNrIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiLz4KPC9zdmc+') 0 0, auto !important;
}

/* Color Blindness Simulation Filters */
.a11y-protanopia {
  filter: url('#protanopia-filter');
}

.a11y-deuteranopia {
  filter: url('#deuteranopia-filter');
}

.a11y-tritanopia {
  filter: url('#tritanopia-filter');
}

/* Skip Links Enhancement */
.skip-link:focus {
  position: fixed !important;
  left: 1rem !important;
  top: 1rem !important;
  width: auto !important;
  height: auto !important;
  padding: 0.75rem 1rem !important;
  background: hsl(var(--primary)) !important;
  color: hsl(var(--primary-foreground)) !important;
  border: 2px solid hsl(var(--primary-foreground)) !important;
  border-radius: var(--radius) !important;
  font-size: 1rem !important;
  font-weight: 600 !important;
  text-decoration: none !important;
  box-shadow: 0 4px 20px hsl(var(--primary) / 0.3) !important;
  z-index: 9999 !important;
  outline: none !important;
}

/* Keyboard Navigation Helpers */
.a11y-enhanced-focus [tabindex="-1"]:focus {
  outline: 2px solid hsl(var(--primary)) !important;
  outline-offset: 2px !important;
}

/* Tooltip Enhancements for Screen Readers */
[role="tooltip"] {
  padding: 0.5rem !important;
  background: hsl(var(--background)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: var(--radius) !important;
  font-size: 0.875rem !important;
  max-width: 20rem !important;
  word-wrap: break-word !important;
}

/* Form Field Enhancements */
.a11y-enhanced-focus .field-error {
  color: hsl(var(--destructive)) !important;
  font-weight: 600 !important;
  display: flex !important;
  align-items: center !important;
  gap: 0.25rem !important;
  margin-top: 0.25rem !important;
}

.a11y-enhanced-focus input[aria-invalid="true"],
.a11y-enhanced-focus textarea[aria-invalid="true"],
.a11y-enhanced-focus select[aria-invalid="true"] {
  border-color: hsl(var(--destructive)) !important;
  outline-color: hsl(var(--destructive)) !important;
  box-shadow: 0 0 0 2px hsl(var(--destructive) / 0.2) !important;
}

/* Button State Indicators */
.a11y-enhanced-focus button[aria-pressed="true"],
.a11y-enhanced-focus [role="button"][aria-pressed="true"] {
  background: hsl(var(--primary)) !important;
  color: hsl(var(--primary-foreground)) !important;
  box-shadow: inset 0 2px 4px hsl(var(--primary) / 0.3) !important;
}

.a11y-enhanced-focus button[aria-expanded="true"],
.a11y-enhanced-focus [role="button"][aria-expanded="true"] {
  background: hsl(var(--accent)) !important;
  color: hsl(var(--accent-foreground)) !important;
}

/* Loading State Indicators */
.a11y-screen-reader [aria-busy="true"]::after {
  content: " (Loading...)" !important;
  color: hsl(var(--muted-foreground)) !important;
  font-style: italic !important;
}

/* Better Focus Management for Modals */
.a11y-enhanced-focus [role="dialog"],
.a11y-enhanced-focus [role="alertdialog"] {
  outline: 4px solid hsl(var(--primary)) !important;
  outline-offset: -4px !important;
}

/* High Contrast Mode for Syntax Highlighting */
.a11y-high-contrast pre,
.a11y-high-contrast code {
  background: hsl(var(--background)) !important;
  color: hsl(var(--foreground)) !important;
  border: 1px solid hsl(var(--border)) !important;
}

.a11y-high-contrast .token {
  color: hsl(var(--foreground)) !important;
}

/* Ensure minimum touch target sizes */
@media (max-width: 768px) {
  .a11y-enhanced-focus button,
  .a11y-enhanced-focus [role="button"],
  .a11y-enhanced-focus input[type="checkbox"],
  .a11y-enhanced-focus input[type="radio"],
  .a11y-enhanced-focus a {
    min-height: 44px !important;
    min-width: 44px !important;
    padding: 0.75rem !important;
    touch-action: manipulation !important;
  }
}

/* Print Accessibility */
@media print {
  .a11y-high-contrast * {
    background: white !important;
    color: black !important;
    box-shadow: none !important;
  }
  
  .a11y-screen-reader .sr-only {
    position: static !important;
    width: auto !important;
    height: auto !important;
    overflow: visible !important;
    clip: auto !important;
  }
}