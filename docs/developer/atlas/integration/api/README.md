---
title: 'API Reference'
last_verified: 2025-12-09
owner: '@alawein'
status: active
---

# API Reference

This section provides comprehensive API documentation for the ORCHEX-KILO
integration, including TypeScript interfaces, classes, and integration points.

## Table of Contents

- [Core Interfaces](#core-interfaces)
- [Bridge APIs](#bridge-apis)
- [Configuration APIs](#configuration-apis)
- [Error Handling](#error-handling)
- [Type Definitions](#type-definitions)

## Core Interfaces

### GovernanceEvent

Represents events generated by the KILO governance system that trigger ORCHEX
analysis.

```typescript
interface GovernanceEvent {
  /** Unique event identifier */
  id: string;

  /** Event type classification */
  type: GovernanceEventType;

  /** Repository where the event occurred */
  repository: string;

  /** Organization owning the repository */
  organization: string;

  /** Event timestamp */
  timestamp: Date;

  /** Event severity level */
  severity: 'low' | 'medium' | 'high' | 'critical';

  /** Optional additional event details */
  details?: {
    filePath?: string;
    lineNumber?: number;
    policy?: string;
    description?: string;
  };
}
```

**GovernanceEventType Values:**

- `policy_violation` - Policy compliance violation detected
- `compliance_failure` - General compliance failure
- `structure_violation` - Repository structure violation
- `security_issue` - Security vulnerability or issue
- `dependency_risk` - Dependency-related risk detected

### RefactoringOperation

Represents a code refactoring operation performed by ORCHEX.

```typescript
interface RefactoringOperation {
  /** Unique operation identifier */
  id: string;

  /** Type of refactoring operation */
  type: RefactoringType;

  /** Path to the file being refactored */
  filePath: string;

  /** Code changes to be applied */
  changes: CodeChange[];

  /** Operation metadata */
  metadata: {
    /** Risk level assessment */
    riskLevel: 'low' | 'medium' | 'high';

    /** Estimated impact score (0-100) */
    estimatedImpact: number;

    /** Whether validation is required */
    requiresValidation: boolean;
  };
}
```

**RefactoringType Values:**

- `extract_function` - Extract code into a new function
- `rename_variable` - Rename a variable or identifier
- `simplify_conditional` - Simplify conditional logic
- `remove_duplication` - Remove code duplication
- `reduce_complexity` - Reduce code complexity
- `improve_naming` - Improve variable/function naming
- `add_type_hints` - Add type annotations
- `extract_constant` - Extract magic numbers/strings to constants

### CodeChange

Represents a single code modification within a refactoring operation.

```typescript
interface CodeChange {
  /** Type of change operation */
  type: 'add' | 'remove' | 'modify';

  /** Starting line number (1-indexed) */
  startLine: number;

  /** Ending line number (1-indexed) */
  endLine: number;

  /** New content to add/modify */
  content: string;

  /** Original content being replaced (for modify/remove operations) */
  originalContent?: string;
}
```

### ValidationResult

Result of validating a refactoring operation against KILO policies.

```typescript
interface ValidationResult {
  /** Whether the operation is valid */
  isValid: boolean;

  /** List of validation errors */
  errors: string[];

  /** List of validation warnings */
  warnings: string[];

  /** Whether rollback is required on failure */
  rollbackRequired: boolean;

  /** Validation execution metadata */
  validationMetadata: {
    /** Version of the validator used */
    validatorVersion: string;

    /** Time taken for validation (ms) */
    validationTime: number;

    /** List of checks performed */
    checksPerformed: string[];
  };
}
```

### TemplateRequest

Request for retrieving a DevOps template from KILO.

```typescript
interface TemplateRequest {
  /** Template category */
  category: 'cicd' | 'db' | 'iac' | 'k8s' | 'logging' | 'monitoring' | 'ui';

  /** Template name within the category */
  name: string;

  /** Specific template version (optional) */
  version?: string;

  /** Template parameter values */
  parameters: Record<string, any>;
}
```

### TemplateResponse

Response containing a retrieved DevOps template.

```typescript
interface TemplateResponse {
  /** Unique template identifier */
  templateId: string;

  /** Template files with content */
  files: TemplateFile[];

  /** Template metadata */
  metadata: {
    /** Template category */
    category: string;

    /** Template name */
    name: string;

    /** Template version */
    version: string;

    /** Human-readable description */
    description: string;

    /** Required dependencies */
    dependencies: string[];
  };
}
```

### TemplateFile

Represents a single file within a template.

```typescript
interface TemplateFile {
  /** Relative file path */
  path: string;

  /** File content */
  content: string;

  /** Placeholder variables found in content */
  placeholders: string[];
}
```

### ComplianceCheck

Request to check code compliance against policies.

```typescript
interface ComplianceCheck {
  /** Source code to check */
  code: string;

  /** Programming language */
  language: string;

  /** Code context information */
  context: {
    /** Repository name */
    repository: string;

    /** File path within repository */
    filePath: string;

    /** Framework or library being used */
    framework?: string;
  };

  /** Policies to check against */
  policies: string[];
}
```

### ComplianceResult

Result of a compliance check operation.

```typescript
interface ComplianceResult {
  /** Overall compliance status */
  isCompliant: boolean;

  /** List of policy violations found */
  violations: ComplianceViolation[];

  /** Recommended remediation actions */
  recommendations: string[];

  /** Compliance check metadata */
  metadata: {
    /** Policies that were checked */
    checkedPolicies: string[];

    /** Overall compliance score (0-100) */
    complianceScore: number;

    /** Time taken for compliance check (ms) */
    checkTime: number;
  };
}
```

### ComplianceViolation

Represents a single policy violation.

```typescript
interface ComplianceViolation {
  /** Policy that was violated */
  policy: string;

  /** Violation severity */
  severity: 'low' | 'medium' | 'high' | 'critical';

  /** Human-readable violation message */
  message: string;

  /** Location of violation in code */
  location?: {
    /** Line number (1-indexed) */
    line: number;

    /** Column number (1-indexed) */
    column: number;
  };

  /** Suggested remediation action */
  suggestion: string;
}
```

## Bridge APIs

### K2ABridge Interface

Interface for the KILO to ORCHEX bridge implementation.

```typescript
interface K2ABridge {
  /**
   * Process a governance event from KILO
   * @param event The governance event to process
   * @returns Promise that resolves when event processing is complete
   */
  onGovernanceEvent(event: GovernanceEvent): Promise<void>;

  /**
   * Get current bridge status
   * @returns Current bridge status information
   */
  getBridgeStatus(): BridgeStatus;

  /**
   * Configure the bridge
   * @param config Bridge configuration
   */
  configure(config: K2ABridgeConfig): void;
}
```

### A2KBridge Interface

Interface for the ORCHEX to KILO bridge implementation.

```typescript
interface A2KBridge {
  /**
   * Validate a refactoring operation
   * @param operation The refactoring operation to validate
   * @returns Validation result
   */
  validateRefactoring(
    operation: RefactoringOperation,
  ): Promise<ValidationResult>;

  /**
   * Retrieve DevOps templates
   * @param request Template retrieval request
   * @returns Template response
   */
  getTemplates(request: TemplateRequest): Promise<TemplateResponse>;

  /**
   * Check code compliance
   * @param check Compliance check request
   * @returns Compliance check result
   */
  checkCompliance(check: ComplianceCheck): Promise<ComplianceResult>;
}
```

### BridgeStatus

Status information for bridge components.

```typescript
interface BridgeStatus {
  /** Whether the bridge is currently active */
  isActive: boolean;

  /** Bridge version */
  version: string;

  /** Number of events/requests processed */
  eventCount: number;

  /** Timestamp of last processed event/request */
  lastEventTime?: Date;

  /** Number of errors encountered */
  errorCount: number;

  /** Current bridge health status */
  health: 'healthy' | 'degraded' | 'unhealthy';
}
```

## Configuration APIs

### Configuration Interfaces

```typescript
interface A2KBridgeConfig {
  validation: {
    strictness: 'lenient' | 'standard' | 'strict';
    timeoutMs: number;
    enableRollback: boolean;
  };
  templates: {
    cacheEnabled: boolean;
    cacheTtlMs: number;
    basePath: string;
  };
  compliance: {
    enabledPolicies: string[];
    failOnWarning: boolean;
  };
}

interface K2ABridgeConfig {
  enabled: boolean;
  eventTypes: GovernanceEventType[];
  analysis: {
    autoTrigger: boolean;
    priorityMapping: Record<string, string>;
  };
  filtering: {
    repositoryFilter?: string[];
    organizationFilter?: string[];
    severityThreshold: string;
  };
  retry: {
    maxAttempts: number;
    backoffMs: number;
  };
}
```

### Configuration Management

```typescript
class ConfigManager {
  /**
   * Load configuration from file
   * @param path Configuration file path
   * @returns Parsed configuration object
   */
  static loadFromFile(path: string): Promise<any>;

  /**
   * Validate configuration object
   * @param config Configuration to validate
   * @returns Validation result
   */
  static validate(config: any): ConfigValidationResult;

  /**
   * Merge configurations with precedence
   * @param configs Array of configurations to merge
   * @returns Merged configuration
   */
  static merge(...configs: any[]): any;

  /**
   * Get configuration value by path
   * @param config Configuration object
   * @param path Dot-separated path (e.g., 'bridges.a2k.validation.strictness')
   * @returns Configuration value
   */
  static get(config: any, path: string): any;

  /**
   * Set configuration value by path
   * @param config Configuration object
   * @param path Dot-separated path
   * @param value Value to set
   */
  static set(config: any, path: string, value: any): void;
}
```

## Error Handling

### Base Error Classes

```typescript
class A2KBridgeError extends Error {
  constructor(
    message: string,
    public code: string,
    public component: 'validation' | 'templates' | 'compliance' | 'bridge',
    public details?: any,
  ) {
    super(message);
    this.name = 'A2KBridgeError';
  }
}

class ValidationError extends A2KBridgeError {
  constructor(
    message: string,
    public operation: RefactoringOperation,
  ) {
    super(message, 'VALIDATION_FAILED', 'validation', {
      operationId: operation.id,
    });
  }
}

class TemplateError extends A2KBridgeError {
  constructor(
    message: string,
    public request: TemplateRequest,
  ) {
    super(message, 'TEMPLATE_ERROR', 'templates', { request });
  }
}

class ComplianceError extends A2KBridgeError {
  constructor(
    message: string,
    public check: ComplianceCheck,
  ) {
    super(message, 'COMPLIANCE_ERROR', 'compliance', { check });
  }
}
```

### Error Codes

| Error Code           | Component  | Description                     |
| -------------------- | ---------- | ------------------------------- |
| `VALIDATION_FAILED`  | validation | Refactoring validation failed   |
| `TEMPLATE_NOT_FOUND` | templates  | Requested template not found    |
| `TEMPLATE_INVALID`   | templates  | Template parameters invalid     |
| `COMPLIANCE_FAILED`  | compliance | Code compliance check failed    |
| `BRIDGE_UNAVAILABLE` | bridge     | Bridge service unavailable      |
| `CONFIG_INVALID`     | config     | Configuration validation failed |
| `NETWORK_ERROR`      | network    | Network communication failed    |
| `TIMEOUT_ERROR`      | timeout    | Operation timed out             |

## Type Definitions

### Utility Types

```typescript
/** Makes all properties of T optional */
type Partial<T> = {
  [P in keyof T]?: T[P];
};

/** Makes all properties of T required */
type Required<T> = {
  [P in keyof T]-?: T[P];
};

/** Makes specified properties of T optional */
type Optional<T, K extends keyof T> = Omit<T, K> & Partial<Pick<T, K>>;

/** Extracts the return type of a function */
type ReturnType<T> = T extends (...args: any[]) => infer R ? R : never;

/** Extracts the parameters of a function */
type Parameters<T> = T extends (...args: infer P) => any ? P : never;

/** Creates a union of all values in an object type */
type ValueOf<T> = T[keyof T];
```

### Enum Types

```typescript
enum GovernanceEventType {
  POLICY_VIOLATION = 'policy_violation',
  COMPLIANCE_FAILURE = 'compliance_failure',
  STRUCTURE_VIOLATION = 'structure_violation',
  SECURITY_ISSUE = 'security_issue',
  DEPENDENCY_RISK = 'dependency_risk',
}

enum RefactoringType {
  EXTRACT_FUNCTION = 'extract_function',
  RENAME_VARIABLE = 'rename_variable',
  SIMPLIFY_CONDITIONAL = 'simplify_conditional',
  REMOVE_DUPLICATION = 'remove_duplication',
  REDUCE_COMPLEXITY = 'reduce_complexity',
  IMPROVE_NAMING = 'improve_naming',
  ADD_TYPE_HINTS = 'add_type_hints',
  EXTRACT_CONSTANT = 'extract_constant',
}

enum ComplianceSeverity {
  LOW = 'low',
  MEDIUM = 'medium',
  HIGH = 'high',
  CRITICAL = 'critical',
}
```

### Generic Types

```typescript
/** Result wrapper for operations that may succeed or fail */
interface Result<T, E = Error> {
  success: boolean;
  data?: T;
  error?: E;
}

/** Paginated response wrapper */
interface PaginatedResponse<T> {
  items: T[];
  total: number;
  page: number;
  pageSize: number;
  hasNext: boolean;
  hasPrev: boolean;
}

/** Cache entry with metadata */
interface CacheEntry<T> {
  data: T;
  timestamp: number;
  ttl: number;
  hits: number;
}

/** Event emitter interface */
interface EventEmitter<T = any> {
  on(event: string, listener: (data: T) => void): void;
  off(event: string, listener: (data: T) => void): void;
  emit(event: string, data: T): void;
}
```

## Implementation Classes

### AtlasKiloBridge

Main implementation of the A2K bridge.

```typescript
class AtlasKiloBridge implements A2KBridge {
  constructor(config?: Partial<A2KBridgeConfig>);

  async validateRefactoring(
    operation: RefactoringOperation,
  ): Promise<ValidationResult>;

  async getTemplates(request: TemplateRequest): Promise<TemplateResponse>;

  async checkCompliance(check: ComplianceCheck): Promise<ComplianceResult>;

  getBridgeStatus(): BridgeStatus;

  updateConfig(newConfig: Partial<A2KBridgeConfig>): void;
}
```

### KiloAtlasBridge

Main implementation of the K2A bridge.

```typescript
class KiloAtlasBridge implements K2ABridge {
  constructor(config?: Partial<K2ABridgeConfig>);

  async onGovernanceEvent(event: GovernanceEvent): Promise<void>;

  getBridgeStatus(): BridgeStatus;

  configure(config: K2ABridgeConfig): void;
}
```

### Validation Components

```typescript
class ValidationProxy {
  constructor(config: A2KBridgeConfig['validation']);

  async validateRefactoring(
    operation: RefactoringOperation,
  ): Promise<ValidationResult>;
}

class TemplateAccessor {
  constructor(config: A2KBridgeConfig['templates']);

  async getTemplates(request: TemplateRequest): Promise<TemplateResponse>;
}

class ComplianceChecker {
  constructor(config: A2KBridgeConfig['compliance']);

  async checkCompliance(check: ComplianceCheck): Promise<ComplianceResult>;
}
```

## Usage Examples

### Basic Bridge Usage

```typescript
import { AtlasKiloBridge, RefactoringOperation } from '@ORCHEX/integrations';

// Create bridge instance
const bridge = new AtlasKiloBridge({
  validation: { strictness: 'standard' },
  templates: { cacheEnabled: true }
});

// Validate a refactoring operation
const operation: RefactoringOperation = {
  id: 'extract-123',
  type: 'extract_function',
  filePath: './src/utils.ts',
  changes: [...],
  metadata: { riskLevel: 'low', requiresValidation: true }
};

const result = await bridge.validateRefactoring(operation);
if (result.isValid) {
  console.log('Refactoring approved');
} else {
  console.log('Validation errors:', result.errors);
}
```

### Template Retrieval

```typescript
const templateRequest: TemplateRequest = {
  category: 'cicd',
  name: 'github-actions',
  parameters: {
    nodeVersion: '18',
    testCommand: 'npm test',
  },
};

const template = await bridge.getTemplates(templateRequest);
console.log(`Generated ${template.files.length} files`);
```

### Compliance Checking

```typescript
const complianceCheck: ComplianceCheck = {
  code: 'const password = "admin123";',
  language: 'javascript',
  context: {
    repository: 'my-app',
    filePath: 'src/auth.js',
  },
  policies: ['security'],
};

const result = await bridge.checkCompliance(complianceCheck);
console.log(`Compliance score: ${result.metadata.complianceScore}`);
```

This API reference provides comprehensive documentation for integrating with the
ORCHEX-KILO bridge system. All interfaces and classes are fully typed and
include detailed JSDoc comments for better IDE support and developer experience.
