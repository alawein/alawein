/**
 * BLACKBOX UI/UX Enhancements
 * Cyberpunk-inspired quantum interface design system
 * Phase 3 Implementation - Week 2-4
 */

:root {
  /* Blackbox-Enhanced Cyberpunk Theme */
  --blackbox-primary: hsl(14, 87%, 54%);
  --blackbox-secondary: hsl(192, 70%, 48%);
  --blackbox-accent: hsl(280, 70%, 60%);
  --blackbox-surface: hsl(235, 15%, 8%);
  --blackbox-elevation-1: hsl(235, 15%, 12%);
  --blackbox-elevation-2: hsl(235, 15%, 16%);
  --blackbox-elevation-3: hsl(235, 15%, 20%);

  /* Quantum-Specific Colors */
  --quantum-blue: hsl(210, 80%, 50%);
  --quantum-purple: hsl(270, 70%, 55%);
  --quantum-green: hsl(150, 70%, 45%);
  --quantum-orange: hsl(30, 80%, 55%);

  /* Circuit Connection Animation */
  --circuit-connection-duration: 0.8s;
  --circuit-connection-easing: cubic-bezier(0.4, 0, 0.2, 1);

  /* Parameter Change Animation */
  --param-change-duration: 0.3s;
  --param-glow-intensity: 0.6;

  /* Data Transition Animation */
  --data-morph-duration: 1.2s;
  --data-stagger-delay: 0.05s;
}

/* ============================================
   QUANTUM CIRCUIT VISUALIZER ENHANCEMENTS
   ============================================ */

/* Gate Button with Glow Effect */
.quantum-gate-enhanced {
  position: relative;
  transition: all var(--circuit-connection-duration) var(--circuit-connection-easing);
  background: var(--blackbox-elevation-1);
  border: 1px solid hsl(var(--primary) / 0.3);
  border-radius: 8px;
  overflow: hidden;
}

.quantum-gate-enhanced::before {
  content: '';
  position: absolute;
  inset: -2px;
  border-radius: inherit;
  background: linear-gradient(135deg, var(--quantum-blue), var(--quantum-purple));
  opacity: 0;
  filter: blur(8px);
  transition: opacity 0.4s ease;
  z-index: -1;
}

.quantum-gate-enhanced:hover::before,
.quantum-gate-enhanced:focus::before,
.quantum-gate-enhanced[data-selected="true"]::before {
  opacity: 0.7;
}

.quantum-gate-enhanced:active {
  transform: scale(0.95);
}

/* Circuit Wire with Particle Effect */
.circuit-wire-enhanced {
  position: relative;
  height: 2px;
  background: linear-gradient(90deg,
    hsl(var(--primary) / 0.3) 0%,
    hsl(var(--primary) / 0.8) 50%,
    hsl(var(--primary) / 0.3) 100%
  );
  overflow: visible;
}

.circuit-wire-enhanced::after {
  content: '';
  position: absolute;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--quantum-blue);
  box-shadow: 0 0 12px var(--quantum-blue), 0 0 24px var(--quantum-blue);
  animation: circuit-particle-flow 2s linear infinite;
  top: 50%;
  transform: translateY(-50%);
}

@keyframes circuit-particle-flow {
  0% {
    left: -8px;
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  90% {
    opacity: 1;
  }
  100% {
    left: calc(100% + 8px);
    opacity: 0;
  }
}

/* Gate Connection Animation */
.gate-connection-line {
  stroke: url(#quantum-gradient);
  stroke-width: 2;
  stroke-dasharray: 8 4;
  animation: connection-dash 1s linear infinite;
}

@keyframes connection-dash {
  to {
    stroke-dashoffset: -12;
  }
}

/* Entanglement Visualization */
.entanglement-link {
  position: relative;
}

.entanglement-link::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg,
    transparent 0%,
    var(--quantum-purple) 50%,
    transparent 100%
  );
  opacity: 0.5;
  animation: entanglement-pulse 1.5s ease-in-out infinite;
}

@keyframes entanglement-pulse {
  0%, 100% {
    opacity: 0.3;
    transform: scaleX(0.95);
  }
  50% {
    opacity: 0.7;
    transform: scaleX(1.05);
  }
}

/* Circuit Builder Container */
.circuit-builder-enhanced {
  background: var(--blackbox-surface);
  border: 1px solid hsl(var(--primary) / 0.2);
  border-radius: 16px;
  box-shadow:
    0 0 40px hsl(var(--primary) / 0.1),
    inset 0 1px 0 hsl(255 100% 100% / 0.05);
  backdrop-filter: blur(20px);
}

/* ============================================
   PARAMETER SPACE INTERACTION ENHANCEMENTS
   ============================================ */

/* Parameter Slider with Glow Feedback */
.param-slider-enhanced {
  position: relative;
  --slider-track-bg: var(--blackbox-elevation-2);
  --slider-fill-bg: linear-gradient(90deg, var(--quantum-blue), var(--quantum-purple));
}

.param-slider-enhanced:focus-within {
  --slider-glow: 0 0 20px hsl(var(--primary) / var(--param-glow-intensity));
}

.param-slider-enhanced input[type="range"] {
  appearance: none;
  width: 100%;
  height: 8px;
  background: var(--slider-track-bg);
  border-radius: 4px;
  outline: none;
  transition: box-shadow var(--param-change-duration) ease;
}

.param-slider-enhanced input[type="range"]::-webkit-slider-thumb {
  appearance: none;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--quantum-blue);
  cursor: pointer;
  box-shadow: 0 0 12px var(--quantum-blue);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.param-slider-enhanced input[type="range"]::-webkit-slider-thumb:hover {
  transform: scale(1.2);
  box-shadow: 0 0 20px var(--quantum-blue), 0 0 40px var(--quantum-purple);
}

/* Parameter Value Display */
.param-value-display {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.875rem;
  color: var(--quantum-blue);
  text-shadow: 0 0 8px var(--quantum-blue);
  transition: all var(--param-change-duration) ease;
}

.param-value-display.changing {
  transform: scale(1.1);
  color: var(--quantum-purple);
  text-shadow: 0 0 12px var(--quantum-purple);
}

/* ============================================
   DATA VISUALIZATION ENHANCEMENTS
   ============================================ */

/* Morphing Data Transition */
.data-viz-container {
  position: relative;
}

.data-viz-item {
  transition: all var(--data-morph-duration) var(--circuit-connection-easing);
  transform-origin: center;
}

.data-viz-item.entering {
  animation: data-morph-in var(--data-morph-duration) var(--circuit-connection-easing) forwards;
}

.data-viz-item.exiting {
  animation: data-morph-out var(--data-morph-duration) var(--circuit-connection-easing) forwards;
}

@keyframes data-morph-in {
  0% {
    opacity: 0;
    transform: scale(0.8) translateY(20px);
    filter: blur(4px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
    filter: blur(0);
  }
}

@keyframes data-morph-out {
  0% {
    opacity: 1;
    transform: scale(1) translateY(0);
    filter: blur(0);
  }
  100% {
    opacity: 0;
    transform: scale(0.8) translateY(-20px);
    filter: blur(4px);
  }
}

/* Staggered Animation for Data Lists */
.data-list-staggered > * {
  animation: stagger-fade-in 0.5s ease forwards;
  opacity: 0;
}

.data-list-staggered > *:nth-child(1) { animation-delay: calc(var(--data-stagger-delay) * 1); }
.data-list-staggered > *:nth-child(2) { animation-delay: calc(var(--data-stagger-delay) * 2); }
.data-list-staggered > *:nth-child(3) { animation-delay: calc(var(--data-stagger-delay) * 3); }
.data-list-staggered > *:nth-child(4) { animation-delay: calc(var(--data-stagger-delay) * 4); }
.data-list-staggered > *:nth-child(5) { animation-delay: calc(var(--data-stagger-delay) * 5); }
.data-list-staggered > *:nth-child(6) { animation-delay: calc(var(--data-stagger-delay) * 6); }
.data-list-staggered > *:nth-child(7) { animation-delay: calc(var(--data-stagger-delay) * 7); }
.data-list-staggered > *:nth-child(8) { animation-delay: calc(var(--data-stagger-delay) * 8); }

@keyframes stagger-fade-in {
  0% {
    opacity: 0;
    transform: translateX(-10px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Quantum State Probability Bars */
.probability-bar {
  position: relative;
  height: 24px;
  background: var(--blackbox-elevation-1);
  border-radius: 4px;
  overflow: hidden;
}

.probability-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--quantum-blue), var(--quantum-purple));
  border-radius: 4px;
  transition: width var(--data-morph-duration) var(--circuit-connection-easing);
  position: relative;
}

.probability-bar-fill::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, transparent 0%, hsl(255 100% 100% / 0.2) 50%, transparent 100%);
  animation: shimmer-sweep 2s ease-in-out infinite;
}

@keyframes shimmer-sweep {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

/* ============================================
   ADVANCED ANIMATION SYSTEM (Week 3)
   ============================================ */

/* Cyberpunk Neon Glow Effect */
.neon-glow {
  position: relative;
}

.neon-glow::before {
  content: '';
  position: absolute;
  inset: -4px;
  border-radius: inherit;
  background: linear-gradient(135deg,
    var(--blackbox-primary) 0%,
    var(--quantum-purple) 50%,
    var(--quantum-blue) 100%
  );
  opacity: 0;
  filter: blur(16px);
  transition: opacity 0.4s ease;
  z-index: -1;
}

.neon-glow:hover::before,
.neon-glow:focus-within::before {
  opacity: 0.6;
}

/* Holographic Shimmer Effect */
.holographic {
  position: relative;
  overflow: hidden;
}

.holographic::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    105deg,
    transparent 40%,
    hsl(180 100% 70% / 0.1) 45%,
    hsl(280 100% 70% / 0.1) 50%,
    hsl(60 100% 70% / 0.1) 55%,
    transparent 60%
  );
  background-size: 200% 100%;
  animation: holographic-sweep 3s ease-in-out infinite;
  pointer-events: none;
}

@keyframes holographic-sweep {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* Quantum Superposition Effect */
.superposition {
  animation: superposition-flicker 4s ease-in-out infinite;
}

@keyframes superposition-flicker {
  0%, 100% {
    opacity: 1;
    filter: hue-rotate(0deg);
  }
  25% {
    opacity: 0.9;
    filter: hue-rotate(10deg);
  }
  50% {
    opacity: 1;
    filter: hue-rotate(-10deg);
  }
  75% {
    opacity: 0.95;
    filter: hue-rotate(5deg);
  }
}

/* Quantum Collapse Animation */
.quantum-collapse {
  animation: quantum-collapse 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes quantum-collapse {
  0% {
    transform: scale(1.2);
    opacity: 0;
    filter: blur(8px);
  }
  50% {
    transform: scale(0.95);
    opacity: 1;
    filter: blur(0);
  }
  100% {
    transform: scale(1);
    opacity: 1;
    filter: blur(0);
  }
}

/* Cyberpunk Scan Line Effect */
.scan-lines {
  position: relative;
}

.scan-lines::before {
  content: '';
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent 0px,
    transparent 2px,
    hsl(0 0% 0% / 0.03) 2px,
    hsl(0 0% 0% / 0.03) 4px
  );
  pointer-events: none;
  z-index: 10;
}

/* Glitch Effect for Errors */
.glitch-effect {
  animation: glitch 0.3s ease-in-out;
}

@keyframes glitch {
  0%, 100% {
    transform: translate(0);
    filter: none;
  }
  20% {
    transform: translate(-2px, 1px);
    filter: hue-rotate(90deg);
  }
  40% {
    transform: translate(2px, -1px);
    filter: hue-rotate(-90deg);
  }
  60% {
    transform: translate(-1px, -1px);
    filter: hue-rotate(45deg);
  }
  80% {
    transform: translate(1px, 1px);
    filter: hue-rotate(-45deg);
  }
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  .circuit-wire-enhanced::after,
  .gate-connection-line,
  .entanglement-link::before,
  .probability-bar-fill::after,
  .data-viz-item.entering,
  .data-viz-item.exiting,
  .data-list-staggered > *,
  .holographic::after,
  .superposition,
  .quantum-collapse,
  .glitch-effect {
    animation: none;
  }

  .quantum-gate-enhanced,
  .param-slider-enhanced input[type="range"]::-webkit-slider-thumb,
  .param-value-display,
  .data-viz-item,
  .probability-bar-fill,
  .neon-glow::before {
    transition-duration: 0.01ms;
  }

  .data-list-staggered > * {
    opacity: 1;
  }

  .quantum-collapse {
    transform: scale(1);
    opacity: 1;
    filter: none;
  }
}

/* ============================================
   RESPONSIVE DESIGN REFINEMENTS (Week 3)
   ============================================ */

/* Mobile-first responsive adjustments */
@media (max-width: 640px) {
  :root {
    --circuit-connection-duration: 0.5s;
    --data-morph-duration: 0.8s;
    --param-glow-intensity: 0.4;
  }

  .circuit-builder-enhanced {
    border-radius: 12px;
    padding: 12px;
  }

  .quantum-gate-enhanced {
    padding: 8px;
    border-radius: 6px;
  }

  .quantum-gate-enhanced::before {
    filter: blur(4px);
  }

  .circuit-wire-enhanced::after {
    width: 6px;
    height: 6px;
  }

  .probability-bar {
    height: 20px;
  }

  .param-slider-enhanced input[type="range"] {
    height: 12px;
  }

  .param-slider-enhanced input[type="range"]::-webkit-slider-thumb {
    width: 24px;
    height: 24px;
  }

  /* Reduce glow effects on mobile for performance */
  .neon-glow::before {
    filter: blur(8px);
  }

  /* Disable scan lines on mobile */
  .scan-lines::before {
    display: none;
  }
}

/* Tablet adjustments */
@media (min-width: 641px) and (max-width: 1024px) {
  :root {
    --circuit-connection-duration: 0.6s;
    --data-morph-duration: 1s;
  }

  .circuit-builder-enhanced {
    border-radius: 14px;
  }

  .quantum-gate-enhanced::before {
    filter: blur(6px);
  }
}

/* Large screens - full effects */
@media (min-width: 1025px) {
  .circuit-builder-enhanced:hover {
    box-shadow:
      0 0 60px hsl(var(--primary) / 0.15),
      inset 0 1px 0 hsl(255 100% 100% / 0.08);
  }

  .quantum-gate-enhanced:hover {
    transform: translateY(-2px);
  }
}

/* Touch device optimizations */
@media (hover: none) and (pointer: coarse) {
  .quantum-gate-enhanced:active::before {
    opacity: 0.7;
  }

  .param-slider-enhanced input[type="range"]::-webkit-slider-thumb {
    width: 28px;
    height: 28px;
  }

  /* Larger touch targets */
  .circuit-wire-enhanced::after {
    width: 10px;
    height: 10px;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .quantum-gate-enhanced {
    border-width: 2px;
  }

  .circuit-wire-enhanced {
    height: 3px;
  }

  .probability-bar-fill {
    background: var(--quantum-blue);
  }

  .neon-glow::before,
  .holographic::after {
    display: none;
  }
}

